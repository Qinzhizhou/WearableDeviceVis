<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!DOCTYPE html>
    <meta charset="utf-8" />
     <script src="https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js"></script>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static '/css/style.css' %}">
    <title>Dashboard Results of Threadmill Results </title>
</head>
<body>
<p> The type of experiment is threadmill data </p>

<form method="POST" action = "{% url 'renew_pread' %}">
    {% csrf_token %}
    Select the day of experiment:
    <select name="typeid">
    <option value="Heart Rate">Heart Rate</option>
    <option value='Steps'>Step 1</option>
    <option value="Steps2">Step 2</option>
    <option value='Calories'>Calories 1</option>
    <option value="Calories2">Calories 2</option>

    </select>
<input type="submit" value="click">
</form>

<section class = 'mainbox'>
    <div class="leftside" id="chart1"></div>
    <div class="rightside" id="chart2"></div>
</section>

<script>
    var chartDom = document.getElementById('chart1');
    var myChart = echarts.init(chartDom);
    var option;
    option = {
        color: ['#FF0087', '#0d0d0d', '#00cc99', '#e69419'],
        dataZoom: [
    {
      type: 'inside',
      start: 0,
      end: 100
    }, {
      start: 0,
      end: 100
    }
  ],

  tooltip: {
    trigger: 'axis',
    axisPointer: {
      type: 'cross',
      label: {
        backgroundColor: '#6a7985'
      }
    }
  },
  legend: {
    data:  ['GT', 'Fitbit Charge HR', 'Fitbit Charge 2', 'Fitbit Surge']
  },
  toolbox: {
    feature: {
      saveAsImage: {}
    }
  },
  grid: {
    left: '3%',
    right: '4%',
    bottom: '10%',
    containLabel: true
  },
  xAxis: [
    {
      type: 'category',
      boundaryGap: false,
      data: {{ timelines|safe }},
    }
  ],
  yAxis: [
    {
      type: 'value'
    }
  ],
  series: [
    {
      name: 'GT',
      type: 'line',
      smooth: true,
      lineStyle: {
        width: 0
      },
      showSymbol: false,
      areaStyle: {
        opacity: 0.8,
          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
          {
            offset: 0,
            color: 'rgb(255, 0, 135)'
          },
          {
            offset: 0.6,
            color: 'rgb(255, 0, 135)'
          }
        ])
      },

      emphasis: {
        focus: 'series'
      },
      data: {{ vA|safe }}
    },
    {
      name: 'Fitbit Charge HR',
      type: 'line',
      smooth: true,
      lineStyle: {
        width: 0
      },
      showSymbol: false,
      areaStyle: {
        opacity: 0.3,
        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
          {
            offset: 0,
            color: '#666666'
          },
          {
            offset: 0.5,
            color: '#0d0d0d'
          }
        ])
      },
      emphasis: {
        focus: 'series'
      },
      data: {{ vB|safe }}
    },
    {
      name:  'Fitbit Charge 2',
      type: 'line',

      smooth: true,
      lineStyle: {
        width: 0
      },
      showSymbol: false,
      areaStyle: {
        opacity: 0.3,
        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
          {
            offset: 0,
            color: '#00cc99'
          },
          {
            offset: 0.5,
            color: '#00cc99'
          }
        ])
      },
      emphasis: {
        focus: 'series'
      },
      data: {{ vC|safe }}
    },
    {
      name: 'Fitbit Surge',
      type: 'line',

      smooth: true,
      lineStyle: {
        width: 0
      },
      showSymbol: false,
      areaStyle: {
        opacity: 0.2,
           color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
          {
            offset: 0.5,
            color: '#e69419'
          },
          {
            offset: 1,
            color: '#e69419'
          }
        ])
      },

      emphasis: {
        focus: 'series'
      },
      data:  {{ vD|safe }}
    }
  ]
};

option && myChart.setOption(option);
</script>


<script>
var chartDom2 = document.getElementById('chart2');
var myChart2 = echarts.init(chartDom2);
var option2;

// prettier-ignore
var hours = {{ timelines|safe }};
// prettier-ignore
var days = ['GT', 'Fitbit Charge HR', 'Fitbit Charge 2', 'Fitbit Surge'];
// prettier-ignore
var va = {{ vA|safe }};
var vb = {{ vB|safe }};
var vc = {{ vC|safe }};
var vd = {{ vD|safe }};
var na = {{ nA|safe }};
var nb = {{ nB|safe }};
var nc = {{ nC|safe }};
var nd = {{ nD|safe }};


var data = [];
for (let i = 0; i < hours.length; i++) {
  data.push([0,i,va[i], na[i]]);
  data.push([1,i,vb[i], nb[i]]);
  data.push([2,i,vc[i], nc[i]]);
  data.push([3,i,vd[i], nd[i]]);

}


const title = [];
var singleAxis = [];
var series = [];

days.forEach(function (day, idx) {
  title.push({
    textBaseline: 'middle',
    top: ((idx + 0.5) * 100) / 7 + '%',
    text: day
  });

  singleAxis.push({
    left: 150,
    type: 'category',
    boundaryGap: false,
    data: hours,
    top: (idx * 120) / 7 + 5 + '%',
    height: 120 / 7 - 10 + '%',
  });
  series.push({
    singleAxisIndex: idx,
    coordinateSystem: 'singleAxis',
    type: 'scatter',
    data: [],
    symbolSize: function (dataItem) {
      return dataItem[1] * 31;
        // return dataItem[1].map(normalization)
    }
  });
});
data.forEach(function (dataItem) {
  series[dataItem[0]].data.push([dataItem[1], dataItem[3]]); // normalize
});


option2 = {

  tooltip: {
      position: 'top',
      trigger: 'axis',
  },
    toolbox: {
    feature: {
        dataZoom: {yAxisIndex: 'none'
        }
    },
      restore: {},
      saveAsImage: {}
    },
  title: title,
  singleAxis: singleAxis,

  series: series,
};

option2 && myChart2.setOption(option2);

</script>

<!-- how to seperate js file in to static file? <script type= 'text/javascript' src="{% static '/js/freeliving.js' %}"></script>-->

{% block messages %}
            {% if messages %}
                <div class = 'container' style="color: firebrick; margin-top: 20px">
            {% for message in messages %}
                {{ message  }}
            {% endfor %}
                </div>
            {% endif %}
        {% endblock %}
<button class="btn"> <a href="{% url 'index' %}"> GO BACK</a></button>
</body>
</html>

